uint8_t crankAngle        = 0;
uint8_t crankSubPulses    = 0;
uint8_t crankPulses       = 0;
uint8_t crankVelocity     = 0;
uint8_t throttlePosition  = 0;
uint8_t cyl1StartAngle    = 0;
uint8_t cyl1Duration      = 0;
uint8_t cyl2StartAngle    = 0;
uint8_t cyl2Duration      = 0;
uint8_t cyl1Angle         = 0;
uint8_t cyl2Angle         = 0;


const uint8_t cylXStartAngle[16][16] =
{
  {0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},
  {0,  8,  7,  5,  5,  4,  4,  2,  2,  2,  1,  1,  1,  1,  1,  1},
  {0,  9,  8,  7,  7,  5,  5,  4,  4,  4,  2,  2,  2,  2,  2,  2},
  {0, 11,  9,  8,  8,  7,  7,  5,  5,  5,  4,  4,  4,  4,  4,  4},
  {0, 12, 11,  9,  9,  8,  8,  7,  7,  7,  5,  5,  5,  5,  5,  5},
  {0, 14, 12, 11, 11,  9,  9,  8,  8,  8,  7,  7,  7,  7,  7,  7},
  {0, 15, 14, 12, 12, 11, 11,  9,  9,  9,  8,  8,  8,  8,  8,  8},
  {0, 16, 15, 14, 14, 12, 12, 11, 11, 11,  9,  9,  9,  9,  9,  9},
  {0, 18, 16, 15, 15, 14, 14, 12, 12, 12, 11, 11, 11, 11, 11, 11},
  {0, 19, 18, 16, 16, 15, 15, 14, 14, 14, 12, 12, 12, 12, 12, 12},
  {0, 21, 19, 18, 18, 16, 16, 15, 15, 15, 14, 14, 14, 14, 14, 14},
  {0, 22, 21, 19, 19, 18, 18, 16, 16, 16, 15, 15, 15, 15, 15, 15},
  {0, 23, 22, 21, 21, 19, 19, 18, 18, 18, 16, 16, 16, 16, 16, 16},
  {0, 25, 23, 22, 22, 21, 21, 19, 19, 19, 18, 18, 18, 18, 18, 18},
  {0, 26, 25, 23, 23, 22, 22, 21, 21, 21, 19, 19, 19, 19, 19, 19},
  {0, 28, 26, 25, 25, 23, 23, 22, 22, 22, 21, 21, 21, 21, 21, 21}
};

const uint8_t cylXDuration[16][16] =
{
   {0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},
   {0,  4,  8, 12, 16, 21, 25, 29, 33, 37, 42, 46, 50, 54, 59, 63},
   {0,  4,  8, 12, 17, 21, 25, 30, 34, 38, 43, 47, 51, 56, 60, 64},
   {0,  4,  8, 13, 17, 22, 26, 30, 35, 39, 44, 48, 52, 57, 61, 66},
   {0,  4,  9, 13, 18, 22, 27, 31, 36, 40, 45, 49, 54, 58, 63, 67},
   {0,  4,  9, 13, 18, 22, 27, 32, 36, 41, 45, 50, 55, 59, 64, 68},
   {0,  4,  9, 14, 18, 23, 28, 32, 37, 42, 46, 51, 56, 60, 65, 70},
   {0,  4,  9, 14, 19, 23, 28, 33, 38, 43, 47, 52, 57, 62, 66, 71},
   {0,  4,  9, 14, 19, 24, 29, 34, 39, 43, 48, 53, 58, 63, 68, 73},
   {0,  4,  9, 14, 19, 24, 29, 34, 39, 44, 49, 54, 59, 64, 69, 74},
   {0,  5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75},
   {0,  5, 10, 15, 20, 25, 30, 36, 41, 46, 51, 56, 61, 67, 72, 77},
   {0,  5, 10, 15, 21, 26, 31, 36, 42, 47, 52, 57, 63, 68, 73, 78},
   {0,  5, 10, 16, 21, 26, 32, 37, 42, 48, 53, 58, 64, 69, 74, 80},
   {0,  5, 10, 16, 21, 27, 32, 38, 43, 48, 54, 59, 65, 70, 76, 81},
   {0,  5, 11, 16, 22, 28, 33, 39, 45, 50, 56, 61, 67, 73, 78, 84}
};

void setup() {
  Serial.begin(115200);
  for(int i = 0 ; i < 16 ; i++){
    for(int j = 0; j < 16; j++){
      Serial.print(cylXStartAngle[i][j]);
      Serial.print("\t");
    }
    Serial.println();
  }
  Serial.println();
  for(int i = 0 ; i < 16 ; i++){
    for(int j = 0; j < 16; j++){
      Serial.print(cylXDuration[i][j]);
      Serial.print("\t");
    }
    Serial.println();
  }
}

void loop() {

}
